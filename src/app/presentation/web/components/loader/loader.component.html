<div class="loading-screen" [class.hidden]="!isActive()" [class.fullscreen]="mode() === 'fullscreen'"
    [class.inline]="mode() === 'inline'">
    <svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg" class="loading-svg">
        <defs>
            <filter id="sunGlow">
                <feGaussianBlur stdDeviation="4" result="blur"></feGaussianBlur>
                <feMerge>
                    <feMergeNode in="blur"></feMergeNode>
                    <feMergeNode in="SourceGraphic"></feMergeNode>
                </feMerge>
            </filter>
        </defs>

        <!-- Ground shadow -->
        <ellipse cx="200" cy="365" rx="100" ry="12" fill="#5E794B" opacity="0.12" />

        <!-- Sun group -->
        <g filter="url(#sunGlow)" #sun>
            <g opacity="0.45" #rays>
                <line x1="0" y1="-28" x2="0" y2="-40" stroke="#C4964A" stroke-width="3" stroke-linecap="round" />
                <line x1="0" y1="-28" x2="0" y2="-40" stroke="#C4964A" stroke-width="2.5" stroke-linecap="round"
                    transform="rotate(45)" />
                <line x1="0" y1="-28" x2="0" y2="-40" stroke="#C4964A" stroke-width="2.5" stroke-linecap="round"
                    transform="rotate(90)" />
                <line x1="0" y1="-28" x2="0" y2="-40" stroke="#C4964A" stroke-width="2.5" stroke-linecap="round"
                    transform="rotate(135)" />
                <line x1="0" y1="-28" x2="0" y2="-40" stroke="#C4964A" stroke-width="2.5" stroke-linecap="round"
                    transform="rotate(180)" />
                <line x1="0" y1="-28" x2="0" y2="-40" stroke="#C4964A" stroke-width="2.5" stroke-linecap="round"
                    transform="rotate(225)" />
                <line x1="0" y1="-28" x2="0" y2="-40" stroke="#C4964A" stroke-width="2.5" stroke-linecap="round"
                    transform="rotate(270)" />
                <line x1="0" y1="-28" x2="0" y2="-40" stroke="#C4964A" stroke-width="2.5" stroke-linecap="round"
                    transform="rotate(315)" />
            </g>
            <circle r="20" fill="#C4964A" />
            <circle r="14" fill="#d4a94f" />
            <circle r="7" fill="#e0bb6a" opacity="0.6" />
        </g>

        <!-- Stem -->
        <path stroke="#5E794B" stroke-width="5" fill="none" stroke-linecap="round" #stem />

        <!-- Left leaf -->
        <g #leafL>
            <path d="M0,0 Q-22,-14 -28,-30 Q-12,-18 0,-6 Z" fill="#6d9560" opacity="0.9" />
        </g>
        <!-- Right leaf -->
        <g #leafR>
            <path d="M0,0 Q22,-14 28,-30 Q12,-18 0,-6 Z" fill="#6d9560" opacity="0.9" />
        </g>

        <!-- Flower head -->
        <g #flower>
            <!-- Outer petals -->
            <ellipse cx="0" cy="-18" rx="6" ry="14" fill="#C4964A" transform="rotate(0)" />
            <ellipse cx="0" cy="-18" rx="6" ry="14" fill="#C4964A" transform="rotate(30)" />
            <ellipse cx="0" cy="-18" rx="6" ry="14" fill="#C4964A" transform="rotate(60)" />
            <ellipse cx="0" cy="-18" rx="6" ry="14" fill="#C4964A" transform="rotate(90)" />
            <ellipse cx="0" cy="-18" rx="6" ry="14" fill="#C4964A" transform="rotate(120)" />
            <ellipse cx="0" cy="-18" rx="6" ry="14" fill="#C4964A" transform="rotate(150)" />
            <ellipse cx="0" cy="-18" rx="6" ry="14" fill="#C4964A" transform="rotate(180)" />
            <ellipse cx="0" cy="-18" rx="6" ry="14" fill="#C4964A" transform="rotate(210)" />
            <ellipse cx="0" cy="-18" rx="6" ry="14" fill="#C4964A" transform="rotate(240)" />
            <ellipse cx="0" cy="-18" rx="6" ry="14" fill="#C4964A" transform="rotate(270)" />
            <ellipse cx="0" cy="-18" rx="6" ry="14" fill="#C4964A" transform="rotate(300)" />
            <ellipse cx="0" cy="-18" rx="6" ry="14" fill="#C4964A" transform="rotate(330)" />
            <!-- Inner petals -->
            <ellipse cx="0" cy="-12" rx="4" ry="9" fill="#d4a94f" transform="rotate(15)" />
            <ellipse cx="0" cy="-12" rx="4" ry="9" fill="#d4a94f" transform="rotate(45)" />
            <ellipse cx="0" cy="-12" rx="4" ry="9" fill="#d4a94f" transform="rotate(75)" />
            <ellipse cx="0" cy="-12" rx="4" ry="9" fill="#d4a94f" transform="rotate(105)" />
            <ellipse cx="0" cy="-12" rx="4" ry="9" fill="#d4a94f" transform="rotate(135)" />
            <ellipse cx="0" cy="-12" rx="4" ry="9" fill="#d4a94f" transform="rotate(165)" />
            <ellipse cx="0" cy="-12" rx="4" ry="9" fill="#d4a94f" transform="rotate(195)" />
            <ellipse cx="0" cy="-12" rx="4" ry="9" fill="#d4a94f" transform="rotate(225)" />
            <ellipse cx="0" cy="-12" rx="4" ry="9" fill="#d4a94f" transform="rotate(255)" />
            <ellipse cx="0" cy="-12" rx="4" ry="9" fill="#d4a94f" transform="rotate(285)" />
            <ellipse cx="0" cy="-12" rx="4" ry="9" fill="#d4a94f" transform="rotate(315)" />
            <ellipse cx="0" cy="-12" rx="4" ry="9" fill="#d4a94f" transform="rotate(345)" />
            <!-- Center -->
            <circle r="10" fill="#5E794B" />
            <circle r="7" fill="#4a613b" />
            <circle cx="0" cy="-3" r="1.2" fill="#3a4b2e" opacity="0.6" />
            <circle cx="2.5" cy="1" r="1.2" fill="#3a4b2e" opacity="0.6" />
            <circle cx="-2.5" cy="1" r="1.2" fill="#3a4b2e" opacity="0.6" />
            <circle cx="0" cy="3.5" r="1.2" fill="#3a4b2e" opacity="0.6" />
        </g>

        <!-- Loading text with animated dots -->
        <text x="185" y="395" text-anchor="middle" fill="#5E794B" font-family="'Outfit', sans-serif" font-size="29"
            font-weight="600" opacity="0.8">Cargando</text>
        <text x="214" y="395" fill="#5E794B" font-family="'Outfit', sans-serif" font-size="29" font-weight="600"
            opacity="0.8">
            <tspan class="dot dot1">.</tspan>
            <tspan class="dot dot2">.</tspan>
            <tspan class="dot dot3">.</tspan>
        </text>
    </svg>
</div>