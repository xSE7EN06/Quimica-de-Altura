<div class="diseases-page">
    <!-- Charts Section -->
    <div class="charts-section">
        <!-- Bar Chart -->
        <div class="chart-container">
            <div class="chart-wrapper">
                <div class="y-axis">
                    <span>100</span>
                    <span>75</span>
                    <span>50</span>
                    <span>25</span>
                    <span>0</span>
                </div>
                <div class="bar-chart">
                    <div class="grid-lines">
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="line"></div>
                        <div class="line"></div>
                    </div>
                    <div class="bars-area">
                        <div class="bar-group">
                            <div class="bar" style="height: 100%; background-color: #56774f;"></div>
                            <span class="label">Producto A</span>
                        </div>
                        <div class="bar-group">
                            <div class="bar" style="height: 75%; background-color: #56774f;"></div>
                            <span class="label">Producto B</span>
                        </div>
                        <div class="bar-group">
                            <div class="bar" style="height: 95%; background-color: #A9BFA3;"></div>
                            <span class="label">Producto C</span>
                        </div>
                        <div class="bar-group">
                            <div class="bar" style="height: 25%; background-color: #1a4d2e;"></div>
                            <span class="label">Producto D</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="x-axis-title">Categoria</div>
        </div>

        <!-- Predominant Categories -->
        <div class="predominant-section">
            <div class="section-title">Categor√≠a de enfermedades predominantes</div>

            <div *ngFor="let stat of diseaseStats" class="category-bar-container" [ngClass]="stat.class">
                <div class="progress-fill" [style.width.%]="stat.percentage"></div>
                <div class="category-text" [ngClass]="stat.textClass">
                    {{ stat.label }}: {{ stat.percentage }}%
                </div>
            </div>
        </div>
    </div>

    <!-- Data Table -->
    <app-data-table [data]="diseases" [columns]="columns" (rowClick)="onViewDisease($event)"
        (editAction)="onEditDisease($event)" (deleteAction)="onBulkDelete($event)">

        <div search-bar class="search-bar">
            <mat-icon class="search-icon">search</mat-icon>
            <input type="text" #searchInput (keyup)="onSearch(searchInput.value)" placeholder="Buscar..." />
        </div>

        <button add-button class="btn-primary" (click)="onAddDisease()">
            <mat-icon>add</mat-icon> Agregar Enfermedad
        </button>
    </app-data-table>

    <!-- Templates -->
    <ng-template #nameTpl let-item>
        <span class="text-primary">{{ item.name }}</span>
    </ng-template>

    <ng-template #viewFileTpl let-item>
        <a href="#" class="view-link" (click)="$event.stopPropagation()">View file <mat-icon
                style="font-size: 14px; width:14px; height:14px; margin-left: 2px;">check_circle_outline</mat-icon></a>
    </ng-template>
</div>